<!doctype html>
<html lang="en-US" dir="ltr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fortune Ndlovu's Articles</title>
    
    <!-- Meta tags for social sharing -->
    <meta property="og:title" content="Welcome to My Articles" />
    <meta property="og:description" content="Explore a variety of articles on web development, UX principles, and more." />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://fortunendlovu.com/write.html" />
    <meta property="og:image" content="https://fortunendlovu.com/img/default-article-thumbnail.jpg" />
    <meta property="og:site_name" content="Fortune Ndlovu's Articles" />

    <!-- Styles and Libraries -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/styles.css">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>
<body>
    <header>
        <!-- NAVIGATION START -->
        <nav class="nav" id="topMenu" role="navigation">
            <a href="../index.html" class="logo">
                <img src="../img/logo.svg" alt="Fortune logo that says fortune with a red dot at the end" width="200"
                    height="38">
            </a><!-- logo -->
            <ul class="nav-links">
                <button class="btn hamburger"><i class="fa-solid fa-burger" aria-hidden="true"></i></button>
                <!-- hamburger -->
                <div class="navitems container">
                    <div class="navbar menu">
                        <li class="home-btn nav-link"><a title="Home" href="../index.html">HOME</a></li>
                        <li class="work-btn nav-link"><a title="Work" href="../index.html#building">WORK</a></li>
                        <li class="contact-btn nav-link"><a title="Contact" href="#send-message">CONTACT</a></li>
                        <li class="download-btn"><a title="Download Resume" href="../img/Fortune-Ndlovu-Resume.pdf"
                                download="Fortune Ndlovu Resume" target="_blank"
                                class="btn btn-outline-primary">Download
                                Resume</a></li>
                    </div><!-- navbar -->
                </div>
            </ul>
        </nav>
    </header>

    <main class="d-flex">
        <!-- Sidebar for article list -->
        <aside class="bg-light p-3" style="width: 250px;">
            <h2>Articles</h2>
            <ul id="articleList" class="list-unstyled">
                <li><a href="#" data-article="web-accessibility" class="article-link">Web Accessibility: The Foundation</a></li>
                <!-- <li><a href="#" data-article="ux-principles" class="article-link">UX Principles for Beginners</a></li>
                <li><a href="#" data-article="js-frameworks" class="article-link">Understanding Modern JS Frameworks</a></li> -->
            </ul>
        </aside>

        <!-- Main content area for articles -->
        <section class="p-4" style="flex: 1;">
            <div id="articleContent">
                <h2>Welcome to My Articles</h2>
                <p>Select an article from the list on the left to read its content.</p>
            </div>
        </section>
    </main>

    <!-- JavaScript for dynamic content loading and meta updates -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const articleLinks = document.querySelectorAll('.article-link');
            const articleContent = document.getElementById('articleContent');

            function loadArticle(articleId) {
                fetch(`../articles/${articleId}.md`)
                    .then(response => response.ok ? response.text() : '## Article not found.')
                    .then(data => {
                        // Convert Markdown to HTML using marked.js
                        articleContent.innerHTML = marked.parse(data);
                        window.scrollTo(0, 0);
                        
                        // Update the URL hash without reloading the page
                        window.location.hash = articleId;

                        // Update Open Graph meta tags dynamically for better sharing
                        updateMetaTags(articleId);
                    })
                    .catch(() => {
                        articleContent.innerHTML = '<p>Sorry, there was an error loading the article.</p>';
                    });
            }

            function updateMetaTags(articleId) {
                const titleElement = document.querySelector(`a[data-article="${articleId}"]`);
                const title = titleElement ? titleElement.innerText : 'Article';
                const description = `Read more about ${title} on our website.`;
                const url = `${window.location.origin}${window.location.pathname}#${articleId}`;

                document.querySelector('meta[property="og:title"]').setAttribute('content', title);
                document.querySelector('meta[property="og:description"]').setAttribute('content', description);
                document.querySelector('meta[property="og:url"]').setAttribute('content', url);
            }

            // Check if a hash is present in the URL to load a specific article
            if (window.location.hash) {
                const articleId = window.location.hash.substring(1);
                loadArticle(articleId);
            } else if (articleLinks.length > 0) {
                // Load the first article by default if no hash is present
                const firstArticleId = articleLinks[0].getAttribute('data-article');
                loadArticle(firstArticleId);
                articleLinks[0].classList.add('active');
            }

            // Add event listeners to article links for dynamic loading
            articleLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const articleId = link.getAttribute('data-article');
                    loadArticle(articleId);
                    articleLinks.forEach(l => l.classList.remove('active'));
                    link.classList.add('active');
                });
            });
        });
    </script>
</body>
</html>
